## Git Commit 规范指南

良好的 `git commit` 消息是项目维护和团队协作的关键。它们能够清晰地传达每次更改的目的和范围，使得代码审查、问题追踪以及版本回溯更加高效。

### Commit Message 基本结构

一个规范的 `git commit` message 通常包含三个部分：**Header (标题)**，**Body (正文)** 和 **Footer (页脚)**。

```
<type>(<scope>): <subject>
// 空一行
<body>
// 空一行
<footer>
```

* **Header (必需)**: 简明扼要地描述本次提交的核心内容。
    * `type`: 提交的类型 (见下文，保持英文)。
    * `scope` (可选): 提交影响的范围，例如某个模块、组件或文件名 (中文描述)。
    * `subject`: 提交的简短描述 (中文描述)。
* **Body (可选)**: 对本次提交的详细描述 (中文描述)。可以分多行。解释为什么进行这次修改，以及它如何影响代码。
* **Footer (可选)**: 通常用于记录不兼容的变更 (Breaking Changes) 或关闭的 Issue (中文描述，关键词可保留英文)。

---

### Header (标题) 详细说明

#### 1. `type` (提交类型) - 必需

用于说明 commit 的类别，只允许使用如下英文标识。此列表包含了所有常见的提交类型：

| 类型        | 描述                                                                 | 英文对应 (常用) |
| ----------- | -------------------------------------------------------------------- | --------------- |
| `feat`      | 新增功能 (feature)                                                   | feature         |
| `fix`       | 修复缺陷 (bug fix)                                                   | bug fix         |
| `docs`      | 文档更新 (documentation)                                             | documentation   |
| `style`     | 代码格式调整 (不影响代码逻辑的修改，例如空格、格式化、缺少分号等)      | styling         |
| `refactor`  | 代码重构 (既不是新增功能，也不是修复 bug 的代码变动)                   | refactoring     |
| `perf`      | 性能优化 (提升性能的代码修改)                                        | performance     |
| `test`      | 测试相关 (增加测试用例或修改现有测试)                                | tests           |
| `build`     | 构建系统或外部依赖项的更改 (例如：gulp, broccoli, npm)               | build           |
| `ci`        | CI/CD 配置文件和脚本的更改 (例如：Travis, Circle, BrowserStack, SauceLabs) | continuous integration |
| `chore`     | 其他不修改 `src` 或 `test` 文件的提交 (例如更新依赖库、构建脚本等)     | chores          |
| `revert`    | 撤销之前的提交                                                       | revert          |

#### 2. `scope` (影响范围) - 可选

用于说明 commit 影响的范围，比如数据层、控制层、视图层等等，视项目不同而不同。
例如：`feat(登录模块): 添加记住我选项`

#### 3. `subject` (简短描述) - 必需

* 用动词开头，使用祈使句 (例如：添加, 修复, 更新)。
* 中文 Subject 通常不涉及首字母大小写问题。若 Subject 为英文，则首字母小写 (专有名词除外)。
* 结尾不加句号。
* 简明扼要，不超过 25 个汉字 (或英文 50 个字符)。

**示例:**

* `feat: 添加用户注册功能`
* `fix(解析器): 正确处理空输入`
* `docs: 更新安装指南`
* `style: 使用 Prettier 格式化代码`
* `refactor(认证模块): 简化令牌生成逻辑`
* `test: 为用户服务添加单元测试`
* `chore: 更新依赖至最新版本`

---

### Body (正文) - 可选

* 对 `subject` 的补充说明，可以包含更详细的信息。
* 解释**为什么**进行这次修改，而不仅仅是**做了什么** (what 已经在 subject 中体现)。
* 每行建议不超过 36 个汉字 (或英文 72 个字符)，以便在各种工具中更好地显示。
* 可以使用多段。

**示例:**

```
fix: 修正用户界面中的几处小的输入错误

用户主界面仪表盘存在几处输入错误。
本次提交修正了这些错误，以提升用户体验和专业性。
没有功能性代码更改。
```
```
feat(接口): 为 POST 请求实现速率限制

为防止滥用并确保服务稳定性，本次提交为所有 /api/v1 端点的 POST 请求
引入了速率限制器。当前的限制是每个 IP 地址每分钟 100 次请求。
```

---

### Footer (页脚) - 可选

主要用于两种情况：

1.  **不兼容的变更 (Breaking Changes)**:
    * 如果当前代码与上一个版本不兼容，则 Footer 部分以 `BREAKING CHANGE:` 开头 (英文关键词)，后面是对变动的中文描述、以及变动理由和迁移方法。
    * 例如：
        ```
        BREAKING CHANGE: `获取用户`接口端点现在需要`apiKey`参数。
        之前的版本不需要身份验证。请更新您的 API 调用以包含新的 `apiKey` 来继续访问。
        ```

2.  **关闭 Issue**:
    * 如果当前 commit 解决了某个 Issue，可以在 Footer 中关闭这个 Issue (英文关键词 `Closes`, `Fixes`, `Resolves` 后跟 Issue 号)。
    * 例如：
        ```
        Closes #123
        ```
        或者
        ```
        Fixes #123, Resolves #456
        ```

---

### 特殊情况：Revert Commit

如果一个提交是为了撤销之前的某个提交，那么它的 `type` 应该是 `revert`，并且 `subject` 应该以 `revert:` 开头，后面是被撤销提交的 `Header` (如果原 Header 是中文，则保持中文)。

```
revert: feat(用户模块): 添加个人资料编辑功能

此提交回滚了 <被回滚提交的哈希值>。
回滚原因：该功能导致了预期之外的副作用。
```

---

### 示例

#### 好的 Commit Message 示例 (简化版):

```
feat(认证模块): 实现基于 JWT 的身份验证

为用户身份验证添加了 JWT 支持，包括登录、路由保护和令牌刷新功能。
Closes #42
```
```
fix(界面): 解决移动端按钮对齐问题

调整了 CSS flex 属性以修正小屏幕上的按钮对齐。
```
```
docs: 更新贡献指南

扩展了代码风格部分，并添加了关于分支策略的详细说明。
```

#### 不好的 Commit Message 示例:

* `fix bug` (过于模糊，应为 `fix: 修复登录页面的一个严重bug`)
* `update code` (没有提供任何有用信息，应具体说明更新了什么)
* `添加东西` (过于随意，不清晰)
* `WIP` (Work In Progress，不应该作为最终提交信息)
* 一个非常长的、没有换行的句子，描述了多个不相关的改动。

